<html>
<head>
	<link href="node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body style="background:#7ED87C;">

<a href = "/index.html"><h2>MainPage</h2></a>
<h3>Create Vote</h3>
<p>
<button type="button" class="btn btn-default" onclick="AddPerson()">Add Person</button>
<button type="button" class="btn btn-default" onclick="RemovePerson()">Remove Person</button>
</p>
<p >
<table class="table" >
<thread>
	<tr>
	<th>status</th>
	<th>Name</th>
	<th>Content</th>
	</tr>
</thread>
<tbody id="FormContent">
<tr class="Person">
			<td><input type="checkbox" class="check" > </td>
			<td><input  class ="PersonName" style="width:100px;" value="CJ"/></td>
			<td><input type="text" class="PersonContent" style="width:300px;" placeholder="Please input Content" value=""/></td>
</tr>
<tr class="Person">
			<td><input type="checkbox" class="check" ></td>
			<td><input  class ="PersonName" style="width:100px;"  value="DY"/></td>
			<td><input type="text"  class="PersonContent"  style="width:300px;"placeholder="Please input Content" value=""/></td>
</tr>
<tr class="Person">
			<td><input type="checkbox" class="check" > </td>
			<td><input  class ="PersonName" style="width:100px;"  value="JGao"/></td>
			<td><input type="text" class="PersonContent" style="width:300px;" placeholder="Please input Content" value=""/></td>
</tr>
<tr class="Person">
			<td><input type="checkbox" class="check" > </td>
			<td><input  class ="PersonName" style="width:100px;" value="WY"/></td>
			<td><input type="text" class="PersonContent" style="width:300px;" placeholder="Please input Content" value=""/></td>
</tr>
	   
<tr class="Person">
			<td><input type="checkbox" class="check" > </td>
			<td><input  class ="PersonName" style="width:100px;"  value="WZH"/></td>
			<td><input type="text"  class="PersonContent"  style="width:300px;"placeholder="Please input Content" value=""/></td>
</tr>
<tr class="Person">
			<td><input type="checkbox" class="check" > </td>
			<td><input  class ="PersonName" style="width:100px;"  value="WWG"/></td>
			<td><input type="text" class="PersonContent" style="width:300px;" placeholder="Please input Content" value=""/></td>
</tr>
<tr class="Person">
			<td><input type="checkbox" class="check" > </td>
			<td><input  class ="PersonName" style="width:100px;" value="YFU"/></td>
			<td><input type="text" class="PersonContent" style="width:300px;" placeholder="Please input Content" value=""/></td>
</tr>
	   
<tr class="Person">
			<td><input type="checkbox" class="check" > </td>
			<td><input  class ="PersonName" style="width:100px;"  value="YORK"/></td>
			<td><input type="text"  class="PersonContent"  style="width:300px;"placeholder="Please input Content" value=""/></td>
</tr>
<tr class="Person">
			<td><input type="checkbox" class="check" > </td>
			<td><input  class ="PersonName" style="width:100px;"  value="ZChen"/></td>
			<td><input type="text" class="PersonContent" style="width:300px;" placeholder="Please input Content" value=""/></td>
</tr>
</tbody>
</table>
   <div >
         <button type="submit" class="btn btn-default" onclick="SubmitVoteContent()">Submit</button>
   </div>
</p>
</body>
<script src="node_modules/jquery/dist/jquery.min.js"></script>
<script>
var addInput = "<tr class='Person'><td><input type='checkbox' class='check'> </td><td><input  class ='PersonName' style='width:100px;'/></td><td><input type='text' class='PersonContent' style='width:300px;' placeholder='Please input Content'/></td></tr>"
var initContent =function(){
	
};
var AddPerson = function(){
	console.log("add person");
	$("#FormContent").append(addInput);
	RefreshListen();
};
var RemovePerson = function(){
	$(".check").each(function(){
		if($(this).attr("checked")){
			$(this).parent().remove();
		}
	});
};
var RefreshListen=function(){
  $(".check").click(function(){
    if($(this).attr("checked")){
		$(this).attr("checked","false");
		}else{
			$(this).attr("checked","true");
		}
  });
};
RefreshListen();
function GetJsonData(){
	var Json={'VoteNumber':'','Person':[]}
	$(".Person").each(function(){
		var Person={"PersonName":"","PersonContent":"","PersonScore":""};
		Person.PersonName = $(this).children("td").eq(1).children("input.PersonName").first().val();
		Person.PersonContent = $(this).children("td").eq(2).children("input.PersonContent").first().val();
		Person.PersonScore = 0;
		console.log(Person);
		Json.Person[Json.Person.length]=Person;
	});
	console.log(Json);
	return JSON.stringify(Json);

};
var SubmitVoteContent = function(){
	console.log("Ajax submit!");
	$.post("PostVote",{data:GetJsonData()},function(result){
	window.location.href ="/";
	});
};
</script>
</html>
